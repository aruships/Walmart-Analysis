<html>
    <head>
        <!--in head start JS-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <title>Walmart Visiter Log</title>
    </head>
    <body>
       <div class="container"><br>
       
        <div class="row">
            <div class="col-3">


            </div>
            <div class="col-3">
                <img src="https://1000logos.net/wp-content/uploads/2017/05/Walmart-Logo.png" style="width:100%;">
        
                
            </div>
            <div class="col-4">
                <h2 style="text-align:center; margin-top:50px;">  | Walmart Visitor Log</h2>
                
            </div>
            <div class="col-2">

                
            </div>
        </div>
        <!----image for logo-->
        <!--2nd section img and form -->
<div class="row">
<div class="col-6">
    <br>
<img src="./images/WhatsApp Image 2023-03-24 at 2.57.29 PM.jpeg" style="width: 100%;">
</div>
<div class="col-6">
    <p>
        <br>
        <b>Please select an option below</b>
        <br>
        <label>Gender</label>
        <select id="gender" class="form-control">
            <option disabled selected value="">--select--</option>
            <option value="1">Male</option>
            <option value="2">Female</option>
            <option value="3">Prefer not to say</option>
        </select>
        <span id="genderError" style="color: red;"></span>
    </p>
    <br>
    <p>
        <label>Age Group</label>
        <select id="agegroup" class="form-control">
            <option disabled selected value="">--select--</option>
            <option value="1">Kids(1-12)</option>
            <option value="2">Teenagers(13-19)</option>
            <option value="3">Youngsters(20-29)</option>
            <option value="4">Adults(30-59)</option>
            <option value="5">Oldies(above 60)</option>
            
         
        </select>
        <span id="ageError" style="color: red;"></span>
       
    </p>
    <br>
    <button class="btn btn-primary" style="width:100%;" onclick="validateForm()">Submit</button>
    <span id="successMsg" style="color:green"></span>
</div>


</div>
<!--img end form end-->
       </div>
       <script>
        <!-- just before closing body tag , start JS-->
        function validateForm(){
                var gender=document.getElementById("gender").value;
                if(gender=="")
                {
                    document.getElementById("genderError").innerHTML="please select gender";
                    return false
                }
                else{
                    document.getElementById("genderError").innerHTML=""

                }
        
            //fetch value from agegroup
            var agegroup=document.getElementById("agegroup").value;
            if(agegroup==""){
                document.getElementById("ageError").innerHTML="please select age";
                    return false
            }
            else{
                document.getElementById("agegroup").innerHTML=""
            }



            //ajax for sending data to server
            var xhttpVisitors=new XMLHttpRequest();
            xhttpVisitors.onreadystatechange=function(){

                if (this.readyState==4 && this.status==200)
                {
                    document.getElementById("successMsg").innerHTML=this.responseText
                    
                }
            }
            xhttpVisitors.open('POST','http://127.0.0.1:5000/log-visitors')
            xhttpVisitors.setRequestHeader("Content-type","application/x-www-form-urlencoded")

            xhttpVisitors.send('gender='+gender+'&age-group='+agegroup);

        } 
       </script>
      
    </body>
</html>